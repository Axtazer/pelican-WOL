{
  "_comment": "Pterodactyl Egg pour serveur Wake-on-LAN",
  "meta": {
    "version": "PTDL_v2",
    "update_url": "https://github.com/Axtazer/pelican-WOL/blob/main/egg-wol-server.json"
  },
  "exported_at": "2025-11-24T12:00:00+00:00",
  "name": "Wake-on-LAN Server",
  "author": "axtazer@github.com",
  "description": "Serveur Node.js WOL avec auto-dÃ©tection des interfaces rÃ©seau",
  "features": null,
  "docker_images": {
    "node:current-trixie": "node:current-trixie"
  },
  "file_denylist": [],
  "startup": "npm start",
  "config": {
    "files": "{}",
    "startup": "{\n    \"done\": \"Serveur Wake-on-LAN dÃ©marrÃ©\"\n}",
    "logs": "{}",
    "stop": "npm stop"
  },
  "scripts": {
    "installation": {
      "script": "#!/bin/ash\n\nset -e\napk add --no-cache git curl jq nodejs npm\nmkdir -p /mnt/server\ncd /mnt/server\n\necho \"ðŸ“¦ RÃ©cupÃ©ration des fichiers depuis le dÃ©pÃ´t GitHub...\"\n\nREPO_URL=\"https://github.com/Axtazer/pelican-WOL.git\"\n\nif [ -d .git ]; then\n  echo \"ðŸ”„ DÃ©pÃ´t dÃ©jÃ  prÃ©sent, pull...\"\n  git fetch --all --depth=1 || true\n  git reset --hard origin/HEAD || true\nelse\n  git clone --depth 1 \"$REPO_URL\" .\nfi\n\n# supprimer l'historique pour allÃ©ger\nrm -rf .git || true\n\n# fallback si le dÃ©pÃ´t n'a pas de package.json\nif [ ! -f package.json ]; then\n  echo \"â— package.json introuvable dans le dÃ©pÃ´t, crÃ©ation d'un package minimal...\"\n  cat > package.json <<'EOF'\n{\n  \"name\": \"wol-server-auto\",\n  \"version\": \"2.0.0\",\n  \"description\": \"Serveur WOL avec auto-dÃ©tection\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"start\": \"node server.js\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.18.2\"\n  }\n}\nEOF\nfi\n\necho \"ðŸ“¥ Installation des dÃ©pendances (npm ci si possible)...\"\nif [ -f package-lock.json ]; then\n  npm ci --only=production || npm install --only=production\nelse\n  npm install --only=production\nfi\n\necho \"âœ… Installation terminÃ©e!\"\n",
      "container": "node:current-trixie",
      "entrypoint": "ash"
    }
  },
  "variables": [
    {
      "name": "Server Port",
      "description": "Port d'Ã©coute du serveur",
      "env_variable": "SERVER_PORT",
      "default_value": "3000",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer|between:1024,65535",
      "field_type": "text"
    },
    {
      "name": "Auto-Detect",
      "description": "Activer l'auto-dÃ©tection des interfaces (true/false)",
      "env_variable": "AUTO_DETECT",
      "default_value": "true",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:true,false",
      "field_type": "text"
    },
    {
      "name": "Local Interface (optionnel)",
      "description": "Nom de l'interface locale (laissez vide pour auto-dÃ©tection)",
      "env_variable": "LOCAL_INTERFACE",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:20",
      "field_type": "text"
    },
    {
      "name": "Docker Interface (optionnel)",
      "description": "Nom de l'interface Docker (laissez vide pour auto-dÃ©tection)",
      "env_variable": "DOCKER_INTERFACE",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:20",
      "field_type": "text"
    },
    {
      "name": "Local Network Prefix",
      "description": "PrÃ©fixe du rÃ©seau local pour l'auto-dÃ©tection (ex: 192.168)",
      "env_variable": "LOCAL_NETWORK_PREFIX",
      "default_value": "192.168",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:15",
      "field_type": "text"
    },
    {
      "name": "Docker Network Prefix",
      "description": "PrÃ©fixe du rÃ©seau Docker (gÃ©nÃ©ralement 172)",
      "env_variable": "DOCKER_NETWORK_PREFIX",
      "default_value": "172",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:15",
      "field_type": "text"
    },
    {
      "name": "Exclude Interfaces",
      "description": "Interfaces Ã  exclure (sÃ©parÃ©es par des virgules)",
      "env_variable": "EXCLUDE_INTERFACES",
      "default_value": "lo",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string",
      "field_type": "text"
    },
    {
      "name": "WOL Port",
      "description": "Port UDP pour Wake-on-LAN",
      "env_variable": "WOL_PORT",
      "default_value": "9",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer|between:1,65535",
      "field_type": "text"
    },
    {
      "name": "API Key",
      "description": "ClÃ© API pour sÃ©curiser les endpoints",
      "env_variable": "API_KEY",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:256",
      "field_type": "text"
    }
  ]
}